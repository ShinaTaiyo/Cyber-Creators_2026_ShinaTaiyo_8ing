//============================================================================
// 
// ２０２５年７月２３日：UI用テキストを描画する [UITextManager.cpp]
// Author : 椎名太陽
// 
//============================================================================

//****************************************************
// インクルードファイル
//****************************************************

#include "UITextManager.h"
#include "manager.h"
#include "renderer.h"

//****************************************************
// usingディレクティブ
//****************************************************
using namespace useful;

//============================================================================
// 
// publicメンバ
// 
//============================================================================

//============================================================================
// コンストラクタ
//============================================================================
CUITextManager::CUITextManager()
{
    // 何もなし
}


//============================================================================
// デストラクタ
//============================================================================
CUITextManager::~CUITextManager()
{
    Clear();
}

//============================================================================
// 更新処理
//============================================================================
void CUITextManager::Update()
{
    // 表示フレーム数が０になったテキストは破棄します。
    m_UITexts.erase(remove_if(m_UITexts.begin(), m_UITexts.end(),
        [](const CUIText* obj)
        {
            if (obj->GetDispFrame() <= 0)
            {
                delete obj;
                return true;
            }
            return false;
        }),
        m_UITexts.end());

    // 全てのUIテキストの更新を行う
    for (auto& Obj : m_UITexts)
    {
        Obj->Update();
    }
}

//============================================================================
// 描画処理
//===========================================================================
void CUITextManager::Draw()
{
    // 全てのUIテキストの描画を行う
    for (auto & Obj : m_UITexts)
    {
        Obj->Draw();
    }
}

//============================================================================
// UIテキスト動的配列をクリアする
//===========================================================================
void CUITextManager::Clear()
{
    // 全てのUIテキストの破棄を行う
    for (auto& Obj : m_UITexts)
    {
        delete Obj;
    }

    m_UITexts.clear();
}

//============================================================================
// UIテキスト動的配列を追加する
//===========================================================================
void CUITextManager::Add(CUIText* pUiText)
{
    m_UITexts.push_back(pUiText);
}